doctype html
html
  head
    title= HugDown
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    // Bootstrap CSS CDN
    link(rel='stylesheet', href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css', crossorigin='anonymous')
    link(rel='stylesheet', href='/stylesheets/geral.css')
    link(rel="stylesheet", href='/stylesheets/layout.css')
    link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css")
    block styles
  body
    // Navbar Bootstrap
    nav.navbar.navbar-expand-lg.navbar-light.bg-light.shadow-sm.py-0
      .container-fluid
        a.navbar-brand.d-flex.align-items-center.gap-2(href='/')
          img#logo-hugdown.logo-hugdown(src='/images/logo.png', alt='HugDown Logo', height='80')
        button.navbar-toggler(type='button', data-bs-toggle='collapse', data-bs-target='#navbarNav', aria-controls='navbarNav', aria-expanded='false', aria-label='Toggle navigation')
          span.navbar-toggler-icon
        .collapse.navbar-collapse#navbarNav
          ul.navbar-nav.ms-auto.align-items-center.gap-2.flex-row.flex-wrap.justify-content-between
            li.nav-item
              a.nav-link.p-2.acao-restrita(href='/notifications', title='Notificações')
                img#icon-notificacao.menu-icon(src='/images/notificação.png', alt='Notificações', height='40')
            li.nav-item
              a.nav-link.p-2(href='/search', title='Pesquisar')
                img#icon-lupa.menu-icon(src='/images/lupa.png', alt='Pesquisar', height='40')
            li.nav-item
              a.nav-link.p-2.acao-restrita(href='/post/new', title='Nova postagem')
                img#icon-mais.menu-icon(src='/images/mais.png', alt='Nova postagem', height='40')

    // Conteúdo principal
    main.site-main.container.mt-4.mb-5
      block content

    // Card flutuante para login/cadastro (restrição de página protegida)
    if typeof telaProtegida !== 'undefined' && telaProtegida
      #card-flutuante-login(style="display:block;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2000;min-width:320px;max-width:90vw;")
        .card.shadow-lg.p-4.text-center
          h5.mb-3.text-danger Tela protegida!
          p.mb-3 Você precisa estar logado para acessar esta página.
          .d-flex.justify-content-center.gap-2
            a.btn.btn-success(href="/login") Login
            a.btn.btn-primary(href="/cadastro") Cadastro
          button.btn.btn-outline-secondary.mt-3(onclick="document.getElementById('card-flutuante-login').style.display='none';document.body.style.overflow=''") Fechar

    // Rodapé Bootstrap
    footer.site-footer.bg-light.shadow-sm.fixed-bottom
      .container
        .d-flex.justify-content-between.align-items-center.gap-1.py-2
          a.acao-restrita(href='/settings', title='Configurações', class='d-flex align-items-center')
            img#icon-engrenagem.footer-icon(src='/images/engrenagem.png', alt='Configurações', height='40')
          a.acao-restrita(href='/chat', title='Chat', class='d-flex align-items-center')
            img#icon-chat.footer-icon(src='/images/chat.png', alt='Chat', height='40')

  // Bootstrap JS Bundle
  script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js', crossorigin='anonymous')
  // JS global para bloqueio de ações restritas
  script(src='/javascripts/geral.js')
  block scripts
